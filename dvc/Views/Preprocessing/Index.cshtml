@using System.Web.Optimization
@using X.PagedList
@using X.PagedList.Mvc
@section Styles{
    <link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
}
@section Scripts{
    <script src="~/Scripts/app/preprocessingClaim.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="~/Scripts/app/preprocessingQueueController.js"></script>
}

@*<div class="row" ng-app="app" style="min-width:1800px;">*@
<div class="row" ng-app="app">
    <div ng-controller="preprocessingQueueController as vm">
        <div class="col-sm-1" style="min-width:12%;">
            <h4>Incoming <span class="badge">{{ vm.preprocessingItems.length }}</span></h4>
            <div class="row form-group form-group-sm">
                <div class="col-sm-12">
                    <select class="form-control" ng-model="filterCriteria.selectedValue" ng-options="option.label for option in filterCriteria.availableOptions track by option.name" ng-change="filterChanged(filterCriteria.selectedValue.name, filterClientsPreprocessing.selectedValue.value)"></select>
                </div>
            </div>
            <div class="row form-group form-group-sm">
                <div class="col-sm-12">
                    <select class="form-control" ng-model="filterClientsPreprocessing.selectedValue" ng-options="option.name for option in filterClientsPreprocessing.availableOptions track by option.value" ng-change="filterChanged(filterCriteria.selectedValue.name, filterClientsPreprocessing.selectedValue.value)"></select>
                </div>
            </div>
            <div class="text-danger" ng-show="vm.errorMessage">{{ vm.errorMessage }}</div>
            <div ng-show="vm.isBusy" class="text-center"><i class="fa fa-spinner fa-spin"></i></div>
            <div ng-hide="vm.preprocessingItems.length > 0"><h3><small>No in coming claims...</small></h3></div>
            <table ng-show="vm.preprocessingItems.length > 0" class="table table-hover" style="display: block; height: 66em; overflow-y: scroll">
                <tr ng-repeat="item in vm.preprocessingItems">
                    <td>
                        <table>
                            <tr ng-show="!item.locked || (item.locked && item.lockedBy == item.assigneeId)" ng-click="loadPoliceReport(item.clientVehicleId)">
                                <td align="left">{{ item.vin }}</td>
                            </tr>
                            <tr ng-show="item.locked && item.lockedBy != item.assigneeId">
                                <td align="left" title="VIN is locked by {{item.lockedByName}}"><span class="locked-vin">{{ item.vin }}</span>&nbsp;<i class="fa fa-lock"></i></td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </div>
        <div class="col-sm-6">
            <div class="row form-group form-group-sm">
                <div id="policereport" class="col-sm-12"></div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="row form-group form-group-sm">
                <div id="create" class="col-sm-12"></div>
            </div>
        </div>

    </div>
</div>
